
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crossy Road - Rabbit vs Lions (With Scoring)</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        canvas {
            display: block;
            background-color: #87CEEB; /* Sky blue background for city environment */
        }
        #scoreboard {
            position: absolute;
            top: 10px;
            left: 10px;
            font-family: Arial, sans-serif;
            font-size: 20px;
            color: white;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="scoreboard">
    Score: <span id="score">0</span> | High Score: <span id="highScore">0</span>
    <br><button onclick="resetHighScore()">Reset High Score</button>
</div>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // Load images for rabbit and lion
    const rabbitImg = new Image();
    rabbitImg.src = "Anime-style_baby_rabbit_character,_standing_cutely.png";  // Baby rabbit image
    
    const lionImg = new Image();
    lionImg.src = "Anime-style_evil_lion_character,_standing_menacing.png";  // Evil lion image

    let rabbit = {
        x: 50,
        y: canvas.height - 100,
        width: 50,
        height: 50,
        speed: 5,
        sprintSpeed: 12,
        isSprinting: false,
        sprintDuration: 0
    };

    let lions = [
        { x: 100, y: 0, width: 50, height: 50, speed: 3 },
        { x: 300, y: 0, width: 50, height: 50, speed: 4 },
        { x: 500, y: 0, width: 50, height: 50, speed: 2 }
    ];

    let keys = {};
    let touchStartX = 0;
    let touchStartY = 0;

    // Scoring and difficulty progression
    let score = 0;
    let highScore = 0;
    let gameSpeed = 1;
    let scoreMultiplier = 1;
    let gameSpeedIncreaseInterval = 5000;  // Increase game speed every 5 seconds
    let lastSpeedIncrease = Date.now();

    // Load sound effect
    const scoreSound = new Audio('cyber_monster_world_sound.mp3'); // Replace with the actual path

    // Display and update score
    function updateScore() {
        document.getElementById('score').textContent = score;
        document.getElementById('highScore').textContent = highScore;
    }

    // Reset high score
    function resetHighScore() {
        highScore = 0;
        updateScore();
    }

    // Rabbit movement
    function moveRabbit() {
        if (keys["ArrowUp"] && rabbit.y > 0) rabbit.y -= rabbit.isSprinting ? rabbit.sprintSpeed : rabbit.speed;
        if (keys["ArrowDown"] && rabbit.y < canvas.height - rabbit.height) rabbit.y += rabbit.isSprinting ? rabbit.sprintSpeed : rabbit.speed;
        if (keys["ArrowLeft"] && rabbit.x > 0) rabbit.x -= rabbit.isSprinting ? rabbit.sprintSpeed : rabbit.speed;
        if (keys["ArrowRight"] && rabbit.x < canvas.width - rabbit.width) rabbit.x += rabbit.isSprinting ? rabbit.sprintSpeed : rabbit.speed;
    }

    // Lions movement
    function moveLions() {
        lions.forEach(lion => {
            lion.y += lion.speed * gameSpeed;
            if (lion.y > canvas.height) {
                lion.y = 0; // Loop the lions when they go off screen
                lion.x = Math.random() * canvas.width;
                // Increase score when the lion passes
                score += 1 * scoreMultiplier;
                scoreSound.play();
                if (score > highScore) {
                    highScore = score;
                }
                updateScore();
            }
        });
    }

    // Check collision
    function checkCollision(rabbit, lion) {
        return rabbit.x < lion.x + lion.width &&
               rabbit.x + rabbit.width > lion.x &&
               rabbit.y < lion.y + lion.height &&
               rabbit.y + rabbit.height > lion.y;
    }

    // Draw rabbit
    function drawRabbit() {
        ctx.drawImage(rabbitImg, rabbit.x, rabbit.y, rabbit.width, rabbit.height);
    }

    // Draw lions
    function drawLions() {
        lions.forEach(lion => {
            ctx.drawImage(lionImg, lion.x, lion.y, lion.width, lion.height);
        });
    }

    // Handle touch input for mobile
    function handleTouchStart(evt) {
        const touch = evt.touches[0];
        touchStartX = touch.clientX;
        touchStartY = touch.clientY;
    }

    function handleTouchMove(evt) {
        if (!touchStartX || !touchStartY) return;

        const touch = evt.touches[0];
        const deltaX = touch.clientX - touchStartX;
        const deltaY = touch.clientY - touchStartY;

        if (Math.abs(deltaX) > Math.abs(deltaY)) {
            // Horizontal swipe
            if (deltaX > 0 && rabbit.x < canvas.width - rabbit.width) {
                rabbit.x += rabbit.speed;
            } else if (deltaX < 0 && rabbit.x > 0) {
                rabbit.x -= rabbit.speed;
            }
        } else {
            // Vertical swipe
            if (deltaY > 0 && rabbit.y < canvas.height - rabbit.height) {
                rabbit.y += rabbit.speed;
            } else if (deltaY < 0 && rabbit.y > 0) {
                rabbit.y -= rabbit.speed;
            }
        }

        touchStartX = touch.clientX;
        touchStartY = touch.clientY;
    }

    function handleTouchEnd() {
        touchStartX = 0;
        touchStartY = 0;
    }

    // Animation frame
    function gameLoop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear the canvas for new frame

        // Increase game speed and multiplier over time
        if (Date.now() - lastSpeedIncrease > gameSpeedIncreaseInterval) {
            gameSpeed += 0.1;
            scoreMultiplier += 0.5;
            lastSpeedIncrease = Date.now();
        }

        // Move and draw the rabbit and lions
        moveRabbit();
        moveLions();
        drawRabbit();
        drawLions();

        // Check for collisions with each lion
        lions.forEach(lion => {
            if (checkCollision(rabbit, lion)) {
                alert("A lion caught the rabbit! Game over.");
                return;
                if (score > highScore) highScore = score;
                score = 0;
                gameSpeed = 1;
                scoreMultiplier = 1;
                updateScore();
            }
        });

        requestAnimationFrame(gameLoop);
    }

    // Keydown and keyup listeners for keyboard controls
    window.addEventListener("keydown", (e) => {
        keys[e.key] = true;
        if (e.key === "Shift") rabbit.isSprinting = true; // Enable sprint when Shift is pressed
    });

    window.addEventListener("keyup", (e) => {
        keys[e.key] = false;
        if (e.key === "Shift") rabbit.isSprinting = false; // Disable sprint when Shift is released
    });

    // Touch event listeners for mobile controls
    canvas.addEventListener("touchstart", handleTouchStart);
    canvas.addEventListener("touchmove", handleTouchMove);
    canvas.addEventListener("touchend", handleTouchEnd);

    gameLoop();
</script>

</body>
</html>
